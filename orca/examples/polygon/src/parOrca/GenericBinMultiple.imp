 ###############################################################################
 #####  GenericBinMultiple.imp                                            ######
 ##                                                                          ###

GENERIC
OBJECT IMPLEMENTATION GenericBinMultiple;

    TYPE T_ARRAY = ARRAY [integer] OF T;

 ##-----------------------------------------------------------------------------
 ## Local variables.
 ##-----------------------------------------------------------------------------
    
    bin:   T_ARRAY;
    tail : integer;
    N : integer;

 ##-----------------------------------------------------------------------------
 ## init()
 ##-----------------------------------------------------------------------------
    
    OPERATION reset( n : integer
    );
	tmp : T_ARRAY [0 .. n-1];
    BEGIN
	N := n;
	bin := tmp;
	tail := 0;
    END; # init()

 ##-----------------------------------------------------------------------------
 ## put()
 ##-----------------------------------------------------------------------------
    
    OPERATION put(
	data: IN T
    	);
    BEGIN
	tail +:= 1;
	bin[tail % N] := data;
    END; # put()

 ##-----------------------------------------------------------------------------
 ## get()
 ##-----------------------------------------------------------------------------
    
    OPERATION get(
	n: IN integer
    ) : T;
    BEGIN
    	GUARD tail >= n DO
	    RETURN bin[n%N];
    	OD;
    END; # get()

 ##-----------------------------------------------------------------------------
 ## Object's initialization.
 ##-----------------------------------------------------------------------------
    
BEGIN
    tail := 0;
END GENERIC;

 ##                                                                          ###
 #####  GenericBinMultiple.imp                                            ######
 ###############################################################################
